!function(){"use strict";angular.module("akreitals.panel-snap",[])}(),function(){"use strict";function e(e,n){return{restrict:"EA",template:'<ul class="ak-menu"><li ng-repeat="panel in panels" ng-class="{active: panel.active}" ng-click="select(panel.id)"><a href>{{panel.name}}</a></li></ul>',scope:{"for":"@"},link:function(t){return angular.isDefined(t.for)?(t.panels=[],e.$on("panelsnap:addedPanel",function(e,n){if(t.for===n.group){e.stopPropagation();var a={id:n.id,name:n.name,active:!1};t.panels.push(a)}}),e.$on("panelsnap:activatePanel",function(e,n){t.for===n.group&&(e.stopPropagation(),angular.forEach(t.panels,function(e){e.active=!1}),t.panels[n.id].active=!0)}),void(t.select=function(n){e.$emit("panelsnap:selectPanel",{group:t.for,id:n})})):void n.error("PanelGroupMenu: no 'for' attribute provided")}}}angular.module("akreitals.panel-snap").directive("akPanelGroupMenu",e),e.$inject=["$rootScope","$log"]}(),function(){"use strict";function e(){return{restrict:"EA",replace:!0,transclude:!0,template:"<div></div>",controller:"PanelGroupController",scope:{name:"@",speed:"=",threshold:"=",fullWindow:"=",keyboard:"=",prevKey:"=",nextKey:"="},link:function(e,n,t,a,r){r(e,function(e){n.append(e)}),e.init()}}}function n(e,n,t,a,r,l,o,i){function c(){g.eventContainer.on("mousewheel scroll touchmove",u),angular.element(a).on("resize",p),e.keyboard&&angular.element(a).on("keydown",s)}function s(e){if(g.enabled)if(g.isSnapping){if(e.which===g.prevKey||e.which===g.nextKey)return e.preventDefault(),i.log("keypress prevented"),!1}else switch(e.which){case g.prevKey:e.preventDefault(),d(g.currentPanel-1);break;case g.nextKey:e.preventDefault(),d(g.currentPanel+1)}}function u(e){var n=50;r.cancel(m),m=r(function(){f(e)},n)}function p(){var e=150;r.cancel(v),v=r(function(){g.scrollInterval=isNaN(g.container[0].innerHeight)?g.container[0].clientHeight:g.container[0].innerHeight,g.enabled&&d(g.currentPanel)},e)}function f(e){if(e.stopPropagation(),!g.isSnapping){var n,t=g.snapContainer.scrollTop();if(!g.enabled)return n=Math.max(0,Math.min(Math.round(t/g.scrollInterval),g.panels.length-1)),void(n!==g.currentPanel&&h(n));var a=t-g.scrollOffset,r=g.container[0].scrollHeight-g.scrollInterval;n=a<-g.threshold&&a>-g.scrollInterval?Math.floor(t/g.scrollInterval):a>g.threshold&&a<g.scrollInterval?Math.ceil(t/g.scrollInterval):Math.round(t/g.scrollInterval),n=Math.max(0,Math.min(n,g.panels.length-1)),0===a||(0>=t||t>=r?(h(n),g.scrollOffset=0>=t?0:r):d(n))}}function d(n){if(!(isNaN(n)||0>n||n>=g.panels.length)){g.isSnapping=!0,o.$broadcast("panelsnap:start",{group:e.name}),g.panels[g.currentPanel].onLeave();var t=g.scrollInterval*n;g.snapContainer.scrollTo(0,t,g.speed).then(function(){g.scrollOffset=t,g.isSnapping=!1,o.$broadcast("panelsnap:finish",{group:e.name}),g.panels[n].onEnter(),h(n)})}}function h(n){angular.forEach(g.panels,function(e){e.setActive(!1)}),g.panels[n].setActive(!0),g.currentPanel=n,o.$broadcast("panelsnap:activate",{group:e.name}),o.$emit("panelsnap:activatePanel",{group:e.name,id:n})}var v,m,g=this;g.panels=[],g.currentPanel=0,g.scrollInterval=0,g.scrollOffset=0,g.isSnapping=!1,g.enabled=!0,g.speed=400,g.threshold=50,g.prevKey=38,g.nextKey=40,g.addPanel=function(n){var t=angular.isDefined(n.name)?n.name:"Panel "+(g.panels.length+1);g.panels.push(n),angular.isDefined(e.name)&&o.$emit("panelsnap:addedPanel",{group:e.name,name:t,id:g.panels.length-1})},e.enableSnap=function(){g.enabled=!0},e.disableSnap=function(){g.enabled=!1},e.toggleSnap=function(){g.enabled=!g.enabled},e.init=function(){g.container=n,g.eventContainer=g.container,g.snapContainer=g.container,e.fullWindow&&(g.container=angular.element(l[0].documentElement),g.eventContainer=g.snapContainer=l),g.scrollInterval=isNaN(g.container[0].innerHeight)?g.container[0].clientHeight:g.container[0].innerHeight,g.speed=angular.isDefined(e.speed)?e.speed:g.speed,g.threshold=angular.isDefined(e.threshold)?e.threshold:g.threshold,g.prevKey=angular.isDefined(e.prevKey)?e.prevKey:g.prevKey,g.nextKey=angular.isDefined(e.nextKey)?e.nextKey:g.nextKey,c(),h(g.currentPanel)},o.$on("panelsnap:selectPanel",function(n,t){e.name===t.group&&(n.stopPropagation(),d(t.id))})}angular.module("akreitals.panel-snap").directive("akPanelGroup",e).controller("PanelGroupController",n),n.$inject=["$scope","$element","$attrs","$window","$timeout","$document","$rootScope","$log"]}(),function(){"use strict";function e(){return{restrict:"EA",require:"^akPanelGroup",replace:!0,transclude:!0,scope:{name:"@",onEnter:"&",onLeave:"&"},template:'<div class="ak-panel" ng-class="{active: active}"></div>',link:function(e,n,t,a,r){r(e.$parent,function(e){n.append(e)}),a.addPanel(e),n.css({width:"100%",height:"100%",position:"relative",overflow:"hidden"}),e.active=!1,e.setActive=function(n){e.active=n}}}}angular.module("akreitals.panel-snap").directive("akPanel",e)}(),function(){"use strict";function e(e){return.5>e?Math.pow(2*e,2)/2:1-Math.pow(2*(1-e),2)/2}function n(e,n,t,a,r){var l=angular.element.prototype,o=function(e){return"undefined"!=typeof HTMLDocument&&e instanceof HTMLDocument||e.nodeType&&e.nodeType===e.DOCUMENT_NODE},i=function(e){return"undefined"!=typeof HTMLElement&&e instanceof HTMLElement||e.nodeType&&e.nodeType===e.ELEMENT_NODE},c=function(e){return i(e)||o(e)?e:e[0]};l.scrollTo=function(n,t,a){var r;if(angular.isElement(n)?r=this.scrollToElement:a&&(r=this.scrollToAnimated),r)return r.apply(this,arguments);var l=c(this);return o(l)?e.scrollTo(n,t):(l.scrollLeft=n,void(l.scrollTop=t))},l.scrollToAnimated=function(e,l,o,i){var c,s;o&&!i&&(i=r);var u=this.scrollLeft(),p=this.scrollTop(),f=Math.round(e-u),d=Math.round(l-p),h=null,v=this,m="scroll mousedown mousewheel touchmove keydown",g=function(e){(!e||e.which>0)&&(v.unbind(m,g),t(c),s.reject(),c=null)};if(c&&g(),s=n.defer(),!f&&!d)return s.resolve(),s.promise;var y=function(e){null===h&&(h=e);var n=e-h,t=n>=o?1:i(n/o);v.scrollTo(u+Math.ceil(f*t),p+Math.ceil(d*t)),1>t?c=a(y):(v.unbind(m,g),c=null,s.resolve())};return v.scrollTo(u,p),c=a(y),s.promise},l.scrollToElement=function(e,n,t,a){var r=c(this),l=this.scrollTop()+c(e).getBoundingClientRect().top-(n||0);return i(r)&&(l-=r.getBoundingClientRect().top),this.scrollTo(0,l,t,a)};var s={scrollLeft:function(n,t,a){if(angular.isNumber(n))return this.scrollTo(n,this.scrollTop(),t,a);var r=c(this);return o(r)?e.scrollX||document.documentElement.scrollLeft||document.body.scrollLeft:r.scrollLeft},scrollTop:function(n,t,a){if(angular.isNumber(n))return this.scrollTo(this.scrollTop(),n,t,a);var r=c(this);return o(r)?e.scrollY||document.documentElement.scrollTop||document.body.scrollTop:r.scrollTop}},u=function(e,n){return function(t,a){return a?n.apply(this,arguments):e.apply(this,arguments)}};for(var p in s)l[p]=l[p]?u(l[p],s[p]):s[p]}function t(e){var n=["webkit","moz","o","ms"];return function(t,a){if(e[t])return e[t];for(var r,l=t.substr(0,1).toUpperCase()+t.substr(1),o=0;o<n.length;o++)if(r=n[o]+l,e[r])return e[r];return a}}function a(e,n){var t=0,a=function(e){var a=(new Date).getTime(),r=Math.max(0,16-(a-t)),l=n(function(){e(a+r)},r);return t=a+r,l};return e("requestAnimationFrame",a)}function r(e,n){var t=function(e){n.cancel(e)};return e("cancelAnimationFrame",t)}angular.module("akreitals.panel-snap").value("scrollEasing",e).run(n).factory("polyfill",t).factory("requestAnimation",a).factory("cancelAnimation",r),n.$inject=["$window","$q","cancelAnimation","requestAnimation","scrollEasing"],t.$inject=["$window"],a.$inject=["polyfill","$timeout"],r.$inject=["polyfill","$timeout"]}();
//# sourceMappingURL=angular-panel-snap.min.js.map